{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/work/kdt01_nextjs/components/TailSelect.tsx"],"sourcesContent":["import { RefObject, ChangeEvent } from \"react\";\r\n\r\ninterface TailSelectProps {\r\n  id:string;\r\n  refSel: RefObject<HTMLSelectElement | null>;\r\n  items:string[] ;\r\n  handleChange?:(e:ChangeEvent<HTMLSelectElement>)=>void;\r\n}\r\n\r\nexport default function TailSelect({id, refSel, items, handleChange}:TailSelectProps) {\r\n\r\n  return (\r\n      <select id={id} ref={refSel} onChange={handleChange}\r\n                className=\"bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 \r\n                focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white\r\n                dark:focus:ring-blue-500 dark:focus:border-blue-500\r\n                my-5\">\r\n        {items.map((item:string) => <option key={item} value={item}>{item}</option>)}\r\n      </select>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AASe,SAAS,WAAW,EAAC,EAAE,EAAE,MAAM,EAAE,KAAK,EAAE,YAAY,EAAiB;IAElF,qBACI,8OAAC;QAAO,IAAI;QAAI,KAAK;QAAQ,UAAU;QAC7B,WAAU;kBAIjB,MAAM,GAAG,CAAC,CAAC,qBAAgB,8OAAC;gBAAkB,OAAO;0BAAO;eAApB;;;;;;;;;;AAGjD","debugId":null}},
    {"offset": {"line": 38, "column": 0}, "map": {"version":3,"sources":["file://C%3A/work/kdt01_nextjs/src/app/subway/page.tsx"],"sourcesContent":["'use client'\r\nimport TailSelect from \"../../../components/TailSelect\"\r\nimport React, { useEffect, useState, useRef } from \"react\"\r\nimport { useRouter } from \"next/navigation\"\r\nimport { useAtom } from \"jotai\"\r\nimport { logAtom} from \"../../../atoms/IsLogin\"\r\nimport scode from \"../../../db/scode.json\"\r\nimport sarea from \"../../../db/sarea.json\"\r\n\r\ninterface Tdata {\r\n  [key:string] : string;\r\n}\r\n\r\ninterface Sarea {\r\n  \"코드\":string;\r\n  \"측정소\":string;\r\n}\r\n\r\ninterface Scode {\r\n  [key:string]: {\r\n    \"name\": string;\r\n    \"unit\": string;\r\n    \"description\": string;\r\n  }\r\n}\r\n\r\nexport default function Subway() {\r\n  const [login] = useAtom(logAtom);\r\n  // const navigate = useNavigate();\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    if (!login) {\r\n      router.push(\"/\");\r\n    }\r\n  }, [login, router]);\r\n\r\n  const [tags, setTags] = useState<React.ReactNode[]>([]);\r\n  const [tags1, setTags1] = useState<React.ReactNode[]>([]);\r\n  const [data, setData] = useState<Tdata[]>([]);\r\n  const [, setCode] = useState<string | undefined>();\r\n  const refSel = useRef<HTMLSelectElement>(null);\r\n\r\n  const selList = sarea.map(\r\n      item => item[\"측정소\"]\r\n    );\r\n    const getYesterday = () => {\r\n      let dt = new Date();\r\n      dt.setDate(dt.getDate() - 1);\r\n  \r\n      //년도\r\n      let year = String(dt.getFullYear());\r\n      year = year.slice(2);\r\n      //월\r\n      let month = String(dt.getMonth() + 1).padStart(2, '0');\r\n      // month = month < 10 ? '0' + month : month ;\r\n  \r\n      //일 \r\n      let day = String(dt.getDate()).padStart(2, '0');\r\n      \r\n      return (year +  month + day);\r\n    }\r\n    \r\n\r\n\r\n  const getFetchData = async () => {\r\n      const apiKey = process.env.NEXT_PUBLIC_API_KEY;\r\n\r\n      let url = \"https://apis.data.go.kr/6260000/IndoorAirQuality/getIndoorAirQualityByStation?serviceKey=\";\r\n      url = `${url}${apiKey}&pageNo=1&numOfRows=104&resultType=json&controlnumber=${getYesterday()}10`\r\n      const resp = await fetch(url);\r\n      const data = await resp.json();\r\n    \r\n      let subwayData = data.response.body.items.item;\r\n      setData(subwayData);\r\n  }\r\n\r\n  const handleChange = () => {\r\n      const selected = refSel.current?.value;\r\n\r\n      const codes = (sarea as Sarea[]).map((item:Sarea) => `${item[\"측정소\"]},${item[\"코드\"]}`); // json은 \":\" 말고 \"as\"\r\n      const test = codes.find(item => item.split(',')[0] === selected) || \"\";\r\n      const selectedCode:string = test.split(',')[1] || \"\";\r\n      console.log(selectedCode)\r\n      setCode(selectedCode);\r\n\r\n      const data2 = data.filter((item:Tdata) => item.areaIndex === selectedCode);\r\n      // console.log(\"data2\",data);\r\n      const tm = data2.map((item:Tdata, idx:number) => \r\n          <tr key={`${item}${idx}`}\r\n          className=\"bg-white border-b border-gray-200\r\n                  hover:bg-gray-50 hover:cursor-pointer hover:font-bold\" >\r\n\r\n            <td className=\"px-6 p-4 text-center\">\r\n            {item[\"pm10\"]}\r\n            </td>\r\n            <td className=\" px-6 py-4 text-center \">\r\n            {item[\"co2\"]}\r\n            </td>\r\n            <td className=\" px-6 py-4 text-center\">\r\n            {item[\"co\"]}\r\n            </td>\r\n            <td className=\" px-6 py-4 text-center\">\r\n            {item[\"no2\"]}\r\n            </td>\r\n            <td className=\" px-6 py-4 text-center\">\r\n            {item[\"no\"]}\r\n            </td>\r\n            <td className=\" px-6 py-4 text-center\">\r\n            {item[\"nox\"]}\r\n            </td>\r\n            <td className=\" px-6 py-4 text-center\">\r\n            {item[\"o3\"]}\r\n            </td>\r\n            <td className=\" px-6 py-4 text-center\">\r\n            {item[\"pm25\"]}\r\n            </td>\r\n            <td className=\" px-6 py-4 text-center\">\r\n            {item[\"fad\"]}\r\n            </td>\r\n            </tr>);\r\n      setTags(tm);\r\n  }\r\n\r\n  useEffect(()=>{\r\n      getFetchData();\r\n  }, []);\r\n\r\n  useEffect(()=>{\r\n    if(!data) return;\r\n    const itemKeys:string[] = Object.keys(scode as Scode);\r\n    const scodeT = scode as Scode;\r\n\r\n    let tm = itemKeys.map((item:string) => \r\n          <th key={item} className=\"font-bold px-6 py-3 text-center w-1/9\">\r\n          {scodeT[item][\"name\"]}<br/>({item})\r\n          </th>\r\n    )\r\n    setTags1(tm)\r\n    handleChange();\r\n  }, [data]);\r\n\r\n  return (\r\n    <div className=\"w-9/10\">\r\n        <div className=\"w-full flex justify-between items-center\">\r\n            <h2 id=\"kakaoMid\" className=\"text-lg text-gray-700 font-bold my-10 px-5 py-2 rounded-lg bg-white\r\n                          border-1 border-gray-100 shadow-md shadow-gray-300\">측정소 선택</h2>\r\n            <div id=\"kakaoNomal\" className=\"w-1/3\"><TailSelect \r\n                id=\"sel\"\r\n                refSel={refSel}\r\n                items={selList}\r\n                handleChange={handleChange}\r\n            />\r\n            </div>\r\n        </div>\r\n        <table id=\"kakaoNomal\" className=\"w-full text-sm text-left rtl:text-right text-gray-700\">\r\n        <thead className=\"text-sm text-gray-700 uppercase bg-gray-100 dark:bg-gray-700\">\r\n          <tr>\r\n            {tags1}\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {tags}\r\n        </tbody>\r\n      </table>    \r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 310, "column": 0}, "map": {"version":3,"sources":["file://C%3A/work/kdt01_nextjs/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}